<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>{{ title }}</title>
  <style>
    body { font-family: ui-sans-serif, system-ui, Arial; margin: 24px; }
    h1,h2 { margin: 0.6em 0; }
    table { border-collapse: collapse; margin: 12px 0; }
    th, td { border: 1px solid #ddd; padding: 6px 10px; }
    img { max-width: 640px; display: block; margin: 10px 0; }
    code { background: #f6f8fa; padding: 2px 6px; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>{{ title }}</h1>
  <p><strong>Run time:</strong> {{ timestamp }}</p>
  <p><strong>CSV:</strong> {{ csv_path }} &nbsp; <strong>Shape:</strong> {{ shape }}</p>
  <p><strong>Target:</strong> {{ target }} &nbsp; <strong>Task:</strong> {{ task_type }} &nbsp; <strong>Model:</strong> {{ model_name }}</p>
  <h2>Metrics</h2>
  <ul>
    {% for k, v in metrics.items() %}
      <li>{{ k }}: {{ "%.4f"|format(v) }}</li>
    {% endfor %}
  </ul>
  <h2>Missing values</h2>
  {% if missing_table %}
  <table>
    <tr><th>column</th><th>missing</th></tr>
    {% for row in missing_table %}
      <tr><td>{{ row.column }}</td><td>{{ row.missing }}</td></tr>
    {% endfor %}
  </table>
  {% else %}<p>No missing values detected.</p>{% endif %}
  {% if corr_table %}
  <h2>Top correlations to {{ target }}</h2>
  <table>
    <tr><th>column</th><th>corr_to_target</th></tr>
    {% for row in corr_table %}
      <tr><td>{{ row.column }}</td><td>{{ "%.3f"|format(row.corr_to_target) }}</td></tr>
    {% endfor %}
  </table>
  {% endif %}
  <h2>Charts</h2>
  {% for c in charts %}
    <img src="{{ c }}" alt="{{ c }}">
  {% endfor %}
  <hr/>
  <p>Generated by <code>Autonomous Data Analyst</code>.</p>
</body>
</html>
